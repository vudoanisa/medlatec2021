@using MEDLATEC.BusinessLayer;
@using System.Data;
@using CaptchaMvc.HtmlHelpers;
@using CMS_Core.Common;
@model  MEDLATEC2019.Models.MPTXViewModel
@{
    /**/


    Layout = "~/Views/Shared/_Layout.cshtml";
    var NewsCate = (List<Cms_News>)ViewBag.NewsCate;
    var TinNoiBat = (List<Cms_News>)ViewBag.TinNoiBat;
    var Tongso = (List<Cms_News>)ViewBag.NewsCateTotal;

    var page = (int)ViewBag.page;
}
@Html.Raw(TempData["msg"])
@if (NewsCate != null)
{
    if (NewsCate.Count > 0)
    {


        @section Note {
            @{
                /**/

                string pageview = "";
                string urlpage = "";
                if (page == 1)
                {

                }
                else
                {
                    pageview = " | Trang " + page.ToString();
                    urlpage = "/" + page.ToString();
                }
            }


            @if (NewsCate[0].TitleSeo != null)
            {
                <title>@Html.Raw(NewsCate[0].TitleSeo.ToString().TrimStart().TrimEnd()) | Medlatec @pageview</title>
            }
            else
            {
                <title>@Html.Raw(NewsCate[0].CateName.ToString().TrimStart().TrimEnd()) | Medlatec @pageview</title>
            }


            @if (ViewBag.description != null)
            {
                <meta name="description" content="@Html.Raw(ViewBag.description.ToString().TrimStart().TrimEnd())" />
            }
            else if (NewsCate[0].cateDescription != null)
            {
                <meta name="description" content="@Html.Raw(@NewsCate[0].cateDescription.ToString().TrimStart().TrimEnd()) @pageview" />
            }

            @if (ViewBag.keywords != null)
            {
                <meta name="keywords" content="@Html.Raw(ViewBag.keywords.ToString().TrimStart().TrimEnd())" />
            }
            else if (NewsCate[0].cateDescription != null)
            {
                <meta name="keywords" content="@Html.Raw(@NewsCate[0].cateDescription.ToString().TrimStart().TrimEnd()) " />
            }


            @if (NewsCate[0].NewsImages != null)
            {
                <meta property="og:image" content="@NewsCate[0].NewsImages" />
            }
            else
            {
                <meta property="og:image" content="https://medlatec.vn/Content/images/logo.jpg" />
            }


            @if (NewsCate[0].CateName != null)
            {
                <meta name="title" content="@Html.Raw(@NewsCate[0].CateName.ToString().TrimStart().TrimEnd()) @pageview" />
            }



            <meta name="robots" content="index,follow,all">
            <link rel="canonical" href="https://medlatec.vn/@CMS_Core.Common.Common.GetURLDetailByCate("tin-tuc",@NewsCate[0].CateName.ToString().ToLower() ,"s"+ @NewsCate[0].CateId.ToString())@urlpage" />
        }


        using (Html.BeginForm("NewsCate", "News", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal" }))
        {

            <div class="breadcrumb-container container">
                <ul class="clearfix">
                    <li><a href="https://medlatec.vn/">Trang chủ</a></li>

                    <li><span>@NewsCate[0].CateName.ToString()</span></li>
                </ul>
            </div>

            <div class="archive-news container">
                <div class="archive-news--row row">
                    <div class="archive-news--col col-xl-9 col-lg-8 col-md-7">
                        <div class="archive-news--container">
                            <h1><span>@NewsCate[0].CateName.ToString()</span></h1>
                            <div class="archive-news--list">

                                @for (int i = 0; i < NewsCate.Count; i++)
                                {


                                    <div class="archive-news--item">
                                        <div class="archive-item--row row">
                                            <div class="archive-item-col col-lg-5">
                                                <div class="archive-item--img">
                                                    @if (NewsCate[i].NewsImages != null)
                                                    {
                                                        string abc = NewsCate[i].newsImagesweb.ToString();
                                                        abc = abc.Replace("\"", "/");
                                                        abc = abc.Replace("\\", "/");
                                                        <a href="/@CMS_Core.Common.Common.GetURLDetailByNews("tin-tuc", NewsCate[i].NewsName.ToString().ToLower(), "s" + NewsCate[i].CateId.ToString(), "n" + NewsCate[i].NewsId.ToString())" title="@NewsCate[i].NewsName.ToString()"><img src="@Html.Raw(abc.Replace("https://login.medlatec.vn","https://img.medlatec.vn"))" alt="@NewsCate[i].NewsName.ToString().TrimStart().TrimEnd()" /></a>
                                                    }

                                                </div>
                                            </div>
                                            <div class="archive-item-col col-lg-7">
                                                <div class="archive-item--content">
                                                    @if (@NewsCate[i].NewsName != null)
                                                    {
                                                        <h3><a href="/@CMS_Core.Common.Common.GetURLDetailByNews("tin-tuc", NewsCate[i].NewsName.ToString().ToLower(), "s" + NewsCate[i].CateId.ToString(), "n" + NewsCate[i].NewsId.ToString())" title="@NewsCate[i].NewsName.ToString()">@NewsCate[i].NewsName.ToString().TrimStart().TrimEnd()</a></h3>
                                                    }

                                                    <div class="archive-item--info clearfix">
                                                        @if (@NewsCate[i].Datepub != null)
                                                        {
                                                            <span class="archive-item--date">Ngày @NewsCate[i].Datepub.ToString("dd/MM/yyyy")</span>
                                                        }
                                                        @if (@NewsCate[i].NewsAuthor != null)
                                                        {
                                                            <span class="archive-item--cat">@NewsCate[i].NewsAuthor.ToString()</span>
                                                        }

                                                    </div>
                                                    @if (@NewsCate[i].NewsDescription != null)
                                                    {
                                                        <div class="archive-item--desc d-none d-xl-block">@NewsCate[i].NewsDescription.ToString()</div>
                                                    }

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }


                            </div>
                            @if (Tongso[0].Tongso > 15)
                            {
                                <div class="container" style="margin:25px 0 25px;">
                                    @Html.Raw(CMS_Core.Common.Common.buildUrl("/" + @CMS_Core.Common.Common.GetURLDetailByCate("tin-tuc", @NewsCate[0].CateName.ToString().ToLower(), "s" + @NewsCate[0].CateId.ToString()), page, Tongso[0].Tongso, 15))

                                </div>

                            }

                        </div>
                    </div>
                    @Html.AntiForgeryToken()
                    <div class="archive-news--col col-xl-3 col-lg-4 col-md-5">
                        <div class="sidebar-container">
                            <div class="news-post">
                                <h2>Tin mới nhất</h2>
                                <div class="news-post--list">

                                    @for (int i = 0; i < 6; i++)
                                    {



                                        <div class="news-post--item">
                                            <div class="news-post--row row">
                                                <div class="news-post--col col-5 col-sm-4 col-md-5">
                                                    <div class="news-post--img">
                                                        @if (@TinNoiBat[i].NewsImages != null)
                                                        {
                                                            <a href="/@CMS_Core.Common.Common.GetURLDetailByNews("tin-tuc", @TinNoiBat[i].NewsName.ToString().ToLower(), "s" + @TinNoiBat[i].CateId.ToString(), "n" + @TinNoiBat[i].NewsId.ToString())" title="@TinNoiBat[i].NewsName.ToString()">
                                                                <img src="@TinNoiBat[i].newsImagesweb.ToString().Replace("https://login.medlatec.vn","https://img.medlatec.vn")" alt="@TinNoiBat[i].NewsName.ToString()" />
                                                            </a>

                                                        }


                                                    </div>
                                                </div>
                                                <div class="news-post--col col-7 col-sm-8 col-md-7">
                                                    <div class="news-post--content">
                                                        @if (@TinNoiBat[i].NewsName != null)
                                                        {
                                                            <h3><a href="/@CMS_Core.Common.Common.GetURLDetailByNews("tin-tuc", @TinNoiBat[i].NewsName.ToString().ToLower(), "s" + @TinNoiBat[i].CateId.ToString(), "n" + @TinNoiBat[i].NewsId.ToString())" title="@TinNoiBat[i].NewsName.ToString()">@TinNoiBat[i].NewsName.ToString()</a></h3>
                                                        }

                                                        <div class="news-post--info clearfix">
                                                            @if (@TinNoiBat[i].Datepub != null)
                                                            {
                                                                <span class="news-post--date">Ngày @TinNoiBat[i].Datepub.ToString("dd/MM/yyyy")</span>
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="register-form d-none d-md-block">
                                <h2>Đăng ký khám, tư vấn</h2>

                                <div class="form">

                                    <style type="text/css">
                                        input[name='CaptchaInputText'] {
                                            width: 100% !important;
                                            line-height: 28px;
                                            background: rgba(255, 255, 255, .8) none;
                                            padding: 10px;
                                            height: 50px;
                                            display: block;
                                            width: 100%;
                                            font-size: 1rem;
                                            font-weight: 400;
                                            line-height: 1.5;
                                            color: #495057;
                                            border: 1px solid #ced4da;
                                            border-radius: .25rem;
                                            transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
                                        }
                                    </style>

                                    <div class="form-group register-name">
                                        <label>Họ và tên <i>(*)</i></label>
                                        @Html.TextBoxFor(m => m.txthoten, new { @class = "form-control", placeholder = "Họ và tên ", type = "text" })


                                    </div>
                                    <div class="form-group register-phone">
                                        <label>Số điện thoại <i>(*)</i></label>
                                        @Html.TextBoxFor(m => m.txtdt, new { @class = "form-control", placeholder = "Số điện thoại", type = "text" })


                                    </div>
                                    <div class="form-group register-email">
                                        <label>Email</label>
                                        @Html.TextBoxFor(m => m.txtEmail, new { @class = "form-control", placeholder = "email ", type = "email" })

                                    </div>
                                    <div class="form-group register-comment">
                                        <label>Ghi chú khác</label>
                                        @Html.TextAreaFor(m => m.noidung, new { @class = "form-control", placeholder = "Nhu cầu khám của bạn là gì? (không bắt buộc)", type = "text" })
                                    </div>


                                    <div class="form-group form-group--btn">
                                        <button type="submit" name="submit" value="SaveAdd">ĐĂNG KÝ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
}

